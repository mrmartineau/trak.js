<html>
	<head>
		<title>trak.js demo</title>
		<link rel="stylesheet" href="http://tmwagency.github.io/kickoff/css/kickoff.css">
	</head>
	<body>
	<div class="l-container">
		<h1>trak.js demo area</h1>
		<p>To test this, please install the <a href="https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna">Google Analytics debugger</a> on the Chrome Web Store or open your browser's Javascript console.</p>
		<h2>Data attributes</h2>
		<p>This is when you define any string as the category, action or label</p>

		<p>
			<a href="#pagehref" title="1 title" data-trak='{"category":"Test category","action":"Test action","label":"Test label","eventName":"Event name test"}'>Data attr test #1</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: test_action, Action: test_action, Label: test_label
		</p>

		<h3>New events</h3>
		<p>As of version 0.4.0 we have added the option to choose other trigger event types. You can define any valid event such as <code>click</code>, <code>focus</code>, <code>blur</code>, <code>mouseover</code>, <code>mouseout</code>, <code>touchstart</code> or <code>touchend</code> or anything else.</p>

		<p>
			<input type="text" data-trak='{"category":"page.title","action":"page.href","label":"this is a label","trigger":"focus"}' class="form-input" placeholder="Event triggers on focus">
			<b>Trigger event used:</b> <code>focus</code><br>
			<b>Result:</b> Category: page.title (wildcard), Action: page.href (wildcard), Label: test_label <br>
		</p>

		<p>
			<input type="text" data-trak='{"category":"page.title","action":"page.href","label":"this is a label","trigger":"blur"}' class="form-input" placeholder="Event triggers on blur">
			<b>Trigger event used:</b> <code>blur</code><br>
			<b>Result:</b> Category: test_action, Action: test_action, Label: test_label <br>
		</p>

		<h2>Wildcard usage</h2>
		<h3>page.title &amp; page.href</h3>
		<p>
			<a href="#pagehref" title="1 title" data-trak='{"category":"page.title","action":"page.href","label":"this is a label","event":"click"}'>Data attr test #2</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: page.title (wildcard), Action: page.href (wildcard), Label: this is a label <br>
		</p>

		<h3>link.title &amp; link.href</h3>
		<p>
			<a href="#linkhref" title="This is an example link title" data-trak='{"category":"link.title","action":"link.href","label":"this is a label"}'>Data attr test #3</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: link.title (wildcard), Action: link.href (wildcard), Label: this is a label <br>
		</p>

		<h3>referrer</h3>
		<p>
			<a href="#linkhref" title="This is another example link title" data-trak='{"category":"referrer","action":"link.href","label":"this is a label"}'>Data attr test #4</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: document.referrer (wildcard), Action: link.href, Label: this is a label <br>
		</p>

		<h2>JS implementation</h2>
		<p>
			<a href="#pagehref" id="js-test1" title="1 title">JS Test #1</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: test_category_(using_js), Action: test_action_(using_js), Label: test_label_(using_js)<br>
		</p>

		<p>
			<a href="#pagehref" id="js-test2" title="1 title">JS Test #2</a><br>
			<b>Trigger event used:</b> <code>mouseover</code><br>
			<b>Result:</b> Category: page.href (wildcard), Action: page.title (wildcard), Label: test_label_(using_js)<br>
		</p>

		<p>
			<a href="#pagehref" id="js-test3" title="This is an example link title">JS Test #3</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: link.href (wildcard), Action: link.title (wildcard), Label: test_label_(using_js)<br>
		</p>

		<p>
			<a href="#pagehref" id="js-test4" title="This is another example link title">JS Test #4</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: document.referrer (wildcard), Action: link.title (wildcard), Label: test_label_(using_js)<br>
		</p>

		<p>
			<a href="#pagehref" id="js-test5" title="This is one more example link title" data-trakwithjs data-trak='{"category":"Tracked with JS not attr call","action":"link.href","label":"this is a label"}'>JS Test #5</a><br>
			<b>Trigger event used:</b> <code>click</code><br>
			<b>Result:</b> Category: Tracked with JS not attr call, Action: link.href (wildcard), Label: test_label_(using_js)<br>
		</p>

	</div>

	<script src="../dist/trak.js"></script>
	<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-51572104-1', 'tmwagency.github.io', {
				'cookieDomain': 'none'
			});

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-XXXXX-X']);
			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
	</script>

	<!-- Google Tag Manager -->
	<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-KDXCWV"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-KDXCWV');</script>
	<!-- End Google Tag Manager -->



	<script>
		document.addEventListener('DOMContentLoaded', function(e) {
			trak.start();

			var test1 = document.querySelector('#js-test1');
			var test2 = document.querySelector('#js-test2');
			var test3 = document.querySelector('#js-test3');
			var test4 = document.querySelector('#js-test4');
			var test5 = document.querySelector('#js-test5');

			test1.addEventListener('click', function() {
				trak.event({
					category : 'Test action (using js)',
					action   : 'Test category (using js)',
					label    : 'Test label (using js)'
				});
			}, true);
			test2.addEventListener('mouseover', function() {
				trak.event({
					category : window.location.href,
					action   : document.title,
					label    : 'Test label (using js)'
				});
			}, true);
			test3.addEventListener('click', function() {
				trak.event({
					category : this.href,
					action   : this.title,
					label    : 'Test label (using js)'
				});
			}, true);
			test4.addEventListener('click', function() {
				trak.event({
					category : document.referrer,
					action   : this.title,
					label    : 'Test label (using js)',
					eventName: 'Test eventName'
				});
			}, true);
			test5.addEventListener('click', function() {
				trak.attrEvent.call(this);
			}, true);

			/**
			 * Change some of the default options
			 */
			// trak.options.clean = false;
			trak.options.debug = true;
			// console.log('trak options:', trak.options);
			// trak.options.trackType = 'gtm';
			//
			// Add more tracking codes
			trak.options.additionalTypes = function(opts) {
				// UDM.evq.push(['trackEvent', trak.clean(category), trak.clean(action)]); // trak.clean(label)
				console.log('Fire additional event', opts);
			}
		});
	</script>
	</body>
</html>
